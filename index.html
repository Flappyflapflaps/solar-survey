<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Solar Site Survey Form - Fast and intuitive mobile form">
    <meta name="theme-color" content="#2c3e50">
    
    <!-- Apple iOS PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Solar Survey">
    
    <!-- Apple Touch Icons for different devices -->
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="152x152" href="apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="167x167" href="apple-touch-icon-167x167.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    
    <!-- Safari Pinned Tab Icon -->
    <link rel="mask-icon" href="icon-192.png" color="#2c3e50">
    
    <!-- iOS Splash Screens -->
    <!-- iPhone SE -->
    <link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" href="splash-iphone-se.png">
    <!-- iPhone 6/7/8 -->
    <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" href="splash-iphone-678.png">
    <!-- iPhone 6/7/8 Plus -->
    <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3)" href="splash-iphone-678-plus.png">
    <!-- iPhone X/XS -->
    <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)" href="splash-iphone-x-xs.png">
    <!-- iPhone XR -->
    <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)" href="splash-iphone-xr.png">
    <!-- iPhone XS Max -->
    <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)" href="splash-iphone-xs-max.png">
    <!-- iPad -->
    <link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)" href="splash-ipad.png">
    <!-- iPad Pro 10.5" -->
    <link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)" href="splash-ipad-pro-105.png">
    <!-- iPad Pro 12.9" -->
    <link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)" href="splash-ipad-pro-129.png">
    
    <title>Solar Site Survey</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Form Type Selector (outside containers so always visible) -->
    <div class="form-type-selector" id="formTypeSelector">
        <label for="formTypeDropdown" class="form-type-label-text">Survey Type:</label>
        <select id="formTypeDropdown" class="form-type-dropdown">
            <option value="solar">Solar Survey</option>
            <option value="siteSurvey">Site Survey (Full)</option>
            <option value="ashp">ASHP Inspection</option>
            <option value="jobCompleted">Job Completed</option>
            <option value="custom">Form Builder</option>
        </select>
    </div>

    <div class="container" id="mainSurveyContainer">
        <!-- Header with Progress -->
        <header class="header">
            <div class="header-brand">
                <h1 id="formTitle">Solar Site Survey</h1>
                <div class="header-trust-badges">
                    <img src="public/Untitled design (17).png" alt="Viking Tools" class="header-logo-main">
                    <img src="public/Untitled design (19).png" alt="Octopus Trusted Partner" class="header-logo-main">
                    <img src="public/Untitled design (21).png" alt="MCS Certified" class="header-logo-badge">
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text"><span id="progressText">0%</span> Complete</div>
        </header>

        <!-- Navigation Menu -->
        <nav class="nav-menu" id="navMenu">
            <button class="nav-toggle" id="navToggle">‚ò∞ Sections</button>
            <div class="nav-items" id="navItems">
                <a href="#inhome" class="nav-item nav-item-highlight">üè† In-Home</a>
                <a href="#surveyor" class="nav-item">Surveyor Info</a>
                <a href="#property" class="nav-item">Property Details</a>
                <a href="#building" class="nav-item">Building</a>
                <a href="#roof" class="nav-item">Roof Aspects</a>
                <a href="#electrical" class="nav-item">Electrical</a>
                <a href="#inverter" class="nav-item">Inverter & System</a>
                <a href="#notes" class="nav-item">Notes & Photos</a>
                <a href="#" class="nav-item" id="customFormsNav">üìù Custom Forms</a>
            </div>
        </nav>

        <!-- Auto-save Indicator -->
        <div class="save-indicator" id="saveIndicator">
            <span class="save-text">Saved</span>
        </div>

        <form id="surveyForm">
            <!-- Job Selection Section -->
            <section id="jobSelect" class="form-section job-section">
                <div class="job-header">
                    <button type="button" class="btn-job-select" id="selectJobBtn" onclick="if(!window.appLoaded){alert('Please run start-server.bat and open http://localhost:8000');}">
                        <span class="job-icon">üìã</span>
                        Select Job
                    </button>
                    <div class="job-info" id="jobInfo" style="display: none;">
                        <div class="job-ref" id="jobRefDisplay"></div>
                        <button type="button" class="btn-job-clear" id="clearJobBtn" title="Clear job">√ó</button>
                    </div>
                </div>
                <div class="equipment-summary" id="equipmentSummary" style="display: none;">
                    <h4>Equipment</h4>
                    <pre id="equipmentText"></pre>
                </div>
            </section>

            <!-- In-Home Survey Section -->
            <section id="inhome" class="form-section inhome-section">
                <h2>üè† In-Home Survey</h2>
                <p class="section-hint">Complete these while at the property - start in loft, work down</p>

                <!-- Loft -->
                <div class="inhome-group">
                    <h3>Loft</h3>

                    <div class="form-group">
                        <label>Loft Floored:</label>
                        <div class="inhome-row">
                            <div class="button-group">
                                <button type="button" class="btn-choice" data-field="inhomeLoftFloored" data-value="Y">Yes</button>
                                <button type="button" class="btn-choice" data-field="inhomeLoftFloored" data-value="N">No</button>
                            </div>
                            <input type="hidden" id="inhomeLoftFloored" name="inhomeLoftFloored" value="">
                            <label class="photo-check" title="Photo taken">
                                <input type="checkbox" name="inhomeLoftFlooredPhotoTaken" class="photo-taken-checkbox">
                                <span class="photo-check-icon"></span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Loft Light:</label>
                        <div class="inhome-row">
                            <div class="button-group">
                                <button type="button" class="btn-choice" data-field="inhomeLoftLight" data-value="Y">Yes</button>
                                <button type="button" class="btn-choice" data-field="inhomeLoftLight" data-value="N">No</button>
                            </div>
                            <input type="hidden" id="inhomeLoftLight" name="inhomeLoftLight" value="">
                            <label class="photo-check" title="Photo taken">
                                <input type="checkbox" name="inhomeLoftLightPhotoTaken" class="photo-taken-checkbox">
                                <span class="photo-check-icon"></span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Loft Ladder:</label>
                        <div class="inhome-row">
                            <div class="button-group">
                                <button type="button" class="btn-choice" data-field="inhomeLoftLadder" data-value="Y">Yes</button>
                                <button type="button" class="btn-choice" data-field="inhomeLoftLadder" data-value="N">No</button>
                            </div>
                            <input type="hidden" id="inhomeLoftLadder" name="inhomeLoftLadder" value="">
                            <label class="photo-check" title="Photo taken">
                                <input type="checkbox" name="inhomeLoftLadderPhotoTaken" class="photo-taken-checkbox">
                                <span class="photo-check-icon"></span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Inverter in Loft:</label>
                        <div class="inhome-row">
                            <div class="button-group">
                                <button type="button" class="btn-choice" data-field="inhomeInverterInLoft" data-value="Y">Yes</button>
                                <button type="button" class="btn-choice" data-field="inhomeInverterInLoft" data-value="N">No</button>
                            </div>
                            <input type="hidden" id="inhomeInverterInLoft" name="inhomeInverterInLoft" value="">
                            <label class="photo-check" title="Photo taken">
                                <input type="checkbox" name="inhomeInverterPhotoTaken" class="photo-taken-checkbox">
                                <span class="photo-check-icon"></span>
                            </label>
                        </div>
                        <div class="conditional-field" id="inhomeInverterLocationGroup" style="display: none;">
                            <label for="inhomeInverterLocation">Location in loft:</label>
                            <div class="quick-options" data-target="inhomeInverterLocation">
                                <button type="button" class="quick-btn">Near hatch</button>
                                <button type="button" class="quick-btn">Centre</button>
                                <button type="button" class="quick-btn">Gable end</button>
                            </div>
                            <input type="text" id="inhomeInverterLocation" name="inhomeInverterLocation" placeholder="Or specify location">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="inhomeRoofAspectsInside">Roof Aspects (from inside):</label>
                        <div class="inhome-row">
                            <textarea id="inhomeRoofAspectsInside" name="inhomeRoofAspectsInside" rows="2" placeholder="Notes on roof from inside loft"></textarea>
                            <label class="photo-check" title="Photo taken">
                                <input type="checkbox" name="inhomeRoofInsidePhotoTaken" class="photo-taken-checkbox">
                                <span class="photo-check-icon"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Working Down -->
                <div class="inhome-group">
                    <h3>Working Down</h3>

                    <div class="form-group">
                        <label>Floor Covering (upstairs):</label>
                        <div class="quick-options" data-target="inhomeFloorCoveringUpstairs">
                            <button type="button" class="quick-btn">Carpet</button>
                            <button type="button" class="quick-btn">Laminate</button>
                            <button type="button" class="quick-btn">Tile</button>
                            <button type="button" class="quick-btn">Wood</button>
                        </div>
                        <div class="inhome-row">
                            <input type="text" id="inhomeFloorCoveringUpstairs" name="inhomeFloorCoveringUpstairs" placeholder="Or type other">
                            <label class="photo-check" title="Photo taken">
                                <input type="checkbox" name="inhomeFloorUpstairsPhotoTaken" class="photo-taken-checkbox">
                                <span class="photo-check-icon"></span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Consumer Units (upstairs):</label>
                        <div class="quick-options" data-target="inhomeConsumerUnitsUpstairs">
                            <button type="button" class="quick-btn">None</button>
                            <button type="button" class="quick-btn">Landing</button>
                            <button type="button" class="quick-btn">Bedroom</button>
                            <button type="button" class="quick-btn">Airing cupboard</button>
                        </div>
                        <div class="inhome-row">
                            <input type="text" id="inhomeConsumerUnitsUpstairs" name="inhomeConsumerUnitsUpstairs" placeholder="Or type location">
                            <label class="photo-check" title="Photo taken">
                                <input type="checkbox" name="inhomeCUUpstairsPhotoTaken" class="photo-taken-checkbox">
                                <span class="photo-check-icon"></span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Meter Location:</label>
                        <div class="quick-options" data-target="inhomeMeterLocation">
                            <button type="button" class="quick-btn">Cupboard</button>
                            <button type="button" class="quick-btn">Garage</button>
                            <button type="button" class="quick-btn">External</button>
                            <button type="button" class="quick-btn">Hall</button>
                            <button type="button" class="quick-btn">Kitchen</button>
                        </div>
                        <div class="inhome-row">
                            <input type="text" id="inhomeMeterLocation" name="inhomeMeterLocation" placeholder="Or type location">
                            <label class="photo-check" title="Photo taken">
                                <input type="checkbox" name="inhomeMeterPhotoTaken" class="photo-taken-checkbox">
                                <span class="photo-check-icon"></span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Fuse Location:</label>
                        <div class="quick-options" data-target="inhomeFuseLocation">
                            <button type="button" class="quick-btn">With meter</button>
                            <button type="button" class="quick-btn">Cupboard</button>
                            <button type="button" class="quick-btn">Garage</button>
                            <button type="button" class="quick-btn">External</button>
                            <button type="button" class="quick-btn">Kitchen</button>
                        </div>
                        <div class="inhome-row">
                            <input type="text" id="inhomeFuseLocation" name="inhomeFuseLocation" placeholder="Or type location">
                            <label class="photo-check" title="Photo taken">
                                <input type="checkbox" name="inhomeFusePhotoTaken" class="photo-taken-checkbox">
                                <span class="photo-check-icon"></span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Earthing System:</label>
                        <div class="quick-options" data-target="inhomeEarthingSystem">
                            <button type="button" class="quick-btn">TN-S</button>
                            <button type="button" class="quick-btn">TN-C-S</button>
                            <button type="button" class="quick-btn">TT</button>
                        </div>
                        <div class="inhome-row">
                            <input type="text" id="inhomeEarthingSystem" name="inhomeEarthingSystem" placeholder="Or specify">
                            <label class="photo-check" title="Photo taken">
                                <input type="checkbox" name="inhomeEarthingPhotoTaken" class="photo-taken-checkbox">
                                <span class="photo-check-icon"></span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Consumer Units (downstairs):</label>
                        <div class="quick-options" data-target="inhomeConsumerUnitsDownstairs">
                            <button type="button" class="quick-btn">Hall</button>
                            <button type="button" class="quick-btn">Kitchen</button>
                            <button type="button" class="quick-btn">Cupboard</button>
                            <button type="button" class="quick-btn">Garage</button>
                            <button type="button" class="quick-btn">Utility</button>
                        </div>
                        <div class="inhome-row">
                            <input type="text" id="inhomeConsumerUnitsDownstairs" name="inhomeConsumerUnitsDownstairs" placeholder="Or type location">
                            <label class="photo-check" title="Photo taken">
                                <input type="checkbox" name="inhomeCUDownstairsPhotoTaken" class="photo-taken-checkbox">
                                <span class="photo-check-icon"></span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Cable Route:</label>
                        <div class="quick-options" data-target="inhomeCableRoute">
                            <button type="button" class="quick-btn">Internal</button>
                            <button type="button" class="quick-btn">External</button>
                            <button type="button" class="quick-btn">Loft</button>
                            <button type="button" class="quick-btn">Under floor</button>
                        </div>
                        <div class="inhome-row">
                            <input type="text" id="inhomeCableRoute" name="inhomeCableRoute" placeholder="Or type details">
                            <label class="photo-check" title="Photo taken">
                                <input type="checkbox" name="inhomeCableRoutePhotoTaken" class="photo-taken-checkbox">
                                <span class="photo-check-icon"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Outside -->
                <div class="inhome-group">
                    <h3>Outside (last)</h3>

                    <div class="form-group">
                        <label for="inhomeRoofAspectsOutside">Roof Aspects (exterior):</label>
                        <div class="inhome-row">
                            <textarea id="inhomeRoofAspectsOutside" name="inhomeRoofAspectsOutside" rows="2" placeholder="Notes on roof from outside"></textarea>
                            <label class="photo-check" title="Photo taken">
                                <input type="checkbox" name="inhomeRoofOutsidePhotoTaken" class="photo-taken-checkbox">
                                <span class="photo-check-icon"></span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>External Photos:</label>
                        <div class="inhome-row">
                            <span class="photo-hint">Front, sides, roof views</span>
                            <label class="photo-check" title="Photo taken">
                                <input type="checkbox" name="inhomeExternalPhotosTaken" class="photo-taken-checkbox">
                                <span class="photo-check-icon"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 1: Surveyor Information -->
            <section id="surveyor" class="form-section">
                <h2>Surveyor Information</h2>

                <div class="form-group">
                    <label for="carriedOutBy">Carried out by:</label>
                    <select id="carriedOutBy" name="carriedOutBy">
                        <option value="">Select surveyor...</option>
                    </select>
                </div>

                <input type="hidden" id="projectRef" name="projectRef" value="">

                <div class="form-row">
                    <div class="form-group">
                        <label for="customerName">Name:</label>
                        <input type="text" id="customerName" name="customerName" placeholder="Customer name">
                    </div>
                    <div class="form-group">
                        <label for="address">Address:</label>
                        <input type="text" id="address" name="address" placeholder="Full address">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="mobile">Mobile:</label>
                        <input type="tel" id="mobile" name="mobile" placeholder="Mobile number" inputmode="tel">
                    </div>
                    <div class="form-group">
                        <label for="postCode">Post Code:</label>
                        <input type="text" id="postCode" name="postCode" placeholder="Post code">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="home">Home:</label>
                        <input type="tel" id="home" name="home" placeholder="Home phone" inputmode="tel">
                    </div>
                    <div class="form-group">
                        <label for="what3words">What 3 Words:</label>
                        <input type="text" id="what3words" name="what3words" placeholder="///">
                    </div>
                </div>

                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" placeholder="email@example.com" inputmode="email">
                </div>
            </section>

            <!-- Section 2: Property Details -->
            <section id="property" class="form-section">
                <h2>Property Details</h2>

                <div class="form-row">
                    <div class="form-group">
                        <label for="conservationArea">Conservation Area:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="conservationArea" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="conservationArea" data-value="N">No</button>
                            <button type="button" class="btn-choice btn-notes" data-field="conservationArea" data-value="Notes">Notes</button>
                        </div>
                        <input type="hidden" id="conservationArea" name="conservationArea" value="">
                        <div class="notes-field" id="conservationAreaNotes" style="display: none;">
                            <textarea name="conservationAreaNotes" placeholder="Add notes..."></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Terrain:</label>
                        <div class="quick-options" data-target="terrain">
                            <button type="button" class="quick-btn">Town</button>
                            <button type="button" class="quick-btn">Country</button>
                            <button type="button" class="quick-btn">Coastal</button>
                        </div>
                        <input type="text" id="terrain" name="terrain" placeholder="Or specify">
                    </div>
                </div>


                <div class="form-row">
                    <div class="form-group">
                        <label for="propertyExposed">Property exposed:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="propertyExposed" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="propertyExposed" data-value="N">No</button>
                            <button type="button" class="btn-choice btn-notes" data-field="propertyExposed" data-value="Notes">Notes</button>
                        </div>
                        <input type="hidden" id="propertyExposed" name="propertyExposed" value="">
                        <div class="notes-field" id="propertyExposedNotes" style="display: none;">
                            <textarea name="propertyExposedNotes" placeholder="Add notes..."></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="parkingAvailable">Parking Available:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="parkingAvailable" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="parkingAvailable" data-value="N">No</button>
                            <button type="button" class="btn-choice btn-notes" data-field="parkingAvailable" data-value="Notes">Notes</button>
                        </div>
                        <input type="hidden" id="parkingAvailable" name="parkingAvailable" value="">
                        <div class="notes-field" id="parkingAvailableNotes" style="display: none;">
                            <textarea name="parkingAvailableNotes" placeholder="Add notes..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="form-group" id="parkingSpecGroup" style="display: none;">
                    <label for="parkingSpec">If no, please specify:</label>
                    <input type="text" id="parkingSpec" name="parkingSpec" placeholder="Parking details">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Occupancy pattern:</label>
                        <div class="quick-options" data-target="occupancyType">
                            <button type="button" class="quick-btn">Home all day</button>
                            <button type="button" class="quick-btn">Out 9-5</button>
                            <button type="button" class="quick-btn">Shift worker</button>
                            <button type="button" class="quick-btn">Variable</button>
                        </div>
                        <input type="text" id="occupancyType" name="occupancyType" placeholder="Or specify">
                    </div>
                    <div class="form-group">
                        <label for="kwhPerAnnum">kWh per annum:</label>
                        <input type="number" id="kwhPerAnnum" name="kwhPerAnnum" placeholder="kWh" inputmode="numeric">
                    </div>
                </div>

                <div class="form-group">
                    <label>DNO:</label>
                    <div class="quick-options" data-target="dno">
                        <button type="button" class="quick-btn">SSE</button>
                        <button type="button" class="quick-btn">SP Network</button>
                    </div>
                    <input type="text" id="dno" name="dno" placeholder="Or specify other">
                </div>
            </section>

            <!-- Section 3: Building Details -->
            <section id="building" class="form-section">
                <h2>Building Details</h2>

                <div class="form-group">
                    <label>Construction:</label>
                    <div class="quick-options" data-target="construction">
                        <button type="button" class="quick-btn">Trad stone</button>
                        <button type="button" class="quick-btn">Brick</button>
                        <button type="button" class="quick-btn">Block</button>
                        <button type="button" class="quick-btn">Timber frame</button>
                    </div>
                    <input type="text" id="construction" name="construction" placeholder="Or specify other">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Thickness of wall:</label>
                        <div class="quick-options" data-target="wallThickness">
                            <button type="button" class="quick-btn">230mm</button>
                            <button type="button" class="quick-btn">300mm</button>
                            <button type="button" class="quick-btn">450mm</button>
                        </div>
                        <input type="text" id="wallThickness" name="wallThickness" placeholder="Or specify (mm)">
                    </div>
                    <div class="form-group">
                        <label for="internalWalk">Internal walk construction:</label>
                        <input type="text" id="internalWalk" name="internalWalk" placeholder="Construction type">
                    </div>
                </div>

                <div class="form-group">
                    <label>Type of Building:</label>
                    <div class="quick-options" data-target="buildingType">
                        <button type="button" class="quick-btn">Bungalow</button>
                        <button type="button" class="quick-btn">2 storey</button>
                        <button type="button" class="quick-btn">3 storey</button>
                        <button type="button" class="quick-btn">Townhouse</button>
                    </div>
                    <input type="text" id="buildingType" name="buildingType" placeholder="Or specify other">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="protectedSpecies">Protected species:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="protectedSpecies" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="protectedSpecies" data-value="N">No</button>
                            <button type="button" class="btn-choice btn-notes" data-field="protectedSpecies" data-value="Notes">Notes</button>
                        </div>
                        <input type="hidden" id="protectedSpecies" name="protectedSpecies" value="">
                        <div class="notes-field" id="protectedSpeciesNotes" style="display: none;">
                            <textarea name="protectedSpeciesNotes" placeholder="Add notes..."></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="nests">Nests:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="nests" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="nests" data-value="N">No</button>
                            <button type="button" class="btn-choice btn-notes" data-field="nests" data-value="Notes">Notes</button>
                        </div>
                        <input type="hidden" id="nests" name="nests" value="">
                        <div class="notes-field" id="nestsNotes" style="display: none;">
                            <textarea name="nestsNotes" placeholder="Add notes..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="form-group" id="nestSpecGroup" style="display: none;">
                    <label for="nestSpec">Type of nest/species:</label>
                    <input type="text" id="nestSpec" name="nestSpec" placeholder="Nest details">
                </div>
            </section>

            <!-- Section 4: Roof Aspects -->
            <section id="roof" class="form-section">
                <h2>Roof Aspects</h2>
                <div id="roofAspectsContainer">
                    <!-- Roof aspects will be dynamically added here -->
                </div>
                <button type="button" class="btn-secondary" id="addRoofAspect">+ Add Roof Aspect</button>
                <div class="form-note">
                    <strong>Note:</strong> For metal box profile or corrugated roofs please note the distance between ridges, height of ridges and width of ridge.
                </div>
            </section>

            <!-- Section 5: Electrical -->
            <section id="electrical" class="form-section">
                <h2>Electrical</h2>

                <div class="form-row">
                    <div class="form-group">
                        <label for="fuseboardLocation">Fuseboard Location:</label>
                        <input type="text" id="fuseboardLocation" name="fuseboardLocation" placeholder="Location">
                    </div>
                    <div class="form-group">
                        <label for="meterLocation">Meter Location:</label>
                        <input type="text" id="meterLocation" name="meterLocation" placeholder="Location">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="electricalCondition">Condition of Electrical installation:</label>
                        <input type="text" id="electricalCondition" name="electricalCondition" placeholder="Condition">
                    </div>
                    <div class="form-group">
                        <label for="phases">Number of Phases:</label>
                        <input type="number" id="phases" name="phases" placeholder="Phases" inputmode="numeric">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="mainFuseSize">Main Fuse Size:</label>
                        <input type="text" id="mainFuseSize" name="mainFuseSize" placeholder="Fuse size">
                    </div>
                    <div class="form-group">
                        <label>Earthing System:</label>
                        <div class="quick-options" data-target="earthingSystem">
                            <button type="button" class="quick-btn">TN-S</button>
                            <button type="button" class="quick-btn">TN-C-S</button>
                            <button type="button" class="quick-btn">TT</button>
                        </div>
                        <div class="inhome-row">
                            <input type="text" id="earthingSystem" name="earthingSystem" placeholder="Or specify">
                            <label class="photo-check" title="Photo taken">
                                <input type="checkbox" name="earthingSystemPhotoTaken" class="photo-taken-checkbox">
                                <span class="photo-check-icon"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="maximumDemand">Maximum Demand:</label>
                    <input type="text" id="maximumDemand" name="maximumDemand" placeholder="Maximum demand">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="loopedSupply">Looped Supply:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="loopedSupply" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="loopedSupply" data-value="N">No</button>
                            <button type="button" class="btn-choice btn-notes" data-field="loopedSupply" data-value="Notes">Notes</button>
                        </div>
                        <input type="hidden" id="loopedSupply" name="loopedSupply" value="">
                        <div class="notes-field" id="loopedSupplyNotes" style="display: none;">
                            <textarea name="loopedSupplyNotes" placeholder="Add notes..."></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="loopImpedance">L-N Loop impedance:</label>
                        <input type="text" id="loopImpedance" name="loopImpedance" placeholder="Impedance">
                    </div>
                </div>

                <div class="form-note important">
                    <strong>‚ö†Ô∏è MUST BE PHOTOGRAPHED</strong>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="spaceForCU">Space for new CU:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="spaceForCU" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="spaceForCU" data-value="N">No</button>
                            <button type="button" class="btn-choice btn-notes" data-field="spaceForCU" data-value="Notes">Notes</button>
                        </div>
                        <input type="hidden" id="spaceForCU" name="spaceForCU" value="">
                        <div class="notes-field" id="spaceForCUNotes" style="display: none;">
                            <textarea name="spaceForCUNotes" placeholder="Add notes..."></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="underfloorAccess">Underfloor Access:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="underfloorAccess" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="underfloorAccess" data-value="N">No</button>
                            <button type="button" class="btn-choice btn-notes" data-field="underfloorAccess" data-value="Notes">Notes</button>
                        </div>
                        <input type="hidden" id="underfloorAccess" name="underfloorAccess" value="">
                        <div class="notes-field" id="underfloorAccessNotes" style="display: none;">
                            <textarea name="underfloorAccessNotes" placeholder="Add notes..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="cableRoute">Cable route:</label>
                        <select id="cableRoute" name="cableRoute">
                            <option value="">Select...</option>
                            <option value="Y">Yes</option>
                            <option value="N">No</option>
                            <option value="See Plan">See Plan</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Floor Coverings:</label>
                        <div class="quick-options" data-target="floorCoverings">
                            <button type="button" class="quick-btn">Carpet</button>
                            <button type="button" class="quick-btn">Laminate</button>
                            <button type="button" class="quick-btn">Tile</button>
                            <button type="button" class="quick-btn">Wood</button>
                        </div>
                        <input type="text" id="floorCoverings" name="floorCoverings" placeholder="Or specify other">
                    </div>
                </div>
            </section>

            <!-- Section 6: Inverter & System -->
            <section id="inverter" class="form-section">
                <h2>Inverter & System Details</h2>

                <div class="form-row">
                    <div class="form-group">
                        <label>Inverter in Loft:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="inverterInLoft" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="inverterInLoft" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="inverterInLoft" name="inverterInLoft" value="">
                    </div>
                    <div class="form-group">
                        <label>Interior/Exterior:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="inverterInteriorExterior" data-value="Interior">Interior</button>
                            <button type="button" class="btn-choice" data-field="inverterInteriorExterior" data-value="Exterior">Exterior</button>
                        </div>
                        <input type="hidden" id="inverterInteriorExterior" name="inverterInteriorExterior" value="">
                    </div>
                </div>

                <div class="form-group">
                    <label for="inverterLocation">Inverter Location:</label>
                    <input type="text" id="inverterLocation" name="inverterLocation" placeholder="Location details">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="wifiAvailable">WiFi Available:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="wifiAvailable" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="wifiAvailable" data-value="N">No</button>
                            <button type="button" class="btn-choice btn-notes" data-field="wifiAvailable" data-value="Notes">Notes</button>
                        </div>
                        <input type="hidden" id="wifiAvailable" name="wifiAvailable" value="">
                        <div class="notes-field" id="wifiAvailableNotes" style="display: none;">
                            <textarea name="wifiAvailableNotes" placeholder="Add notes..."></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Mounting Surface:</label>
                        <div class="quick-options" data-target="mountingSurface">
                            <button type="button" class="quick-btn">Brick</button>
                            <button type="button" class="quick-btn">Plasterboard</button>
                            <button type="button" class="quick-btn">Timber</button>
                            <button type="button" class="quick-btn">Block</button>
                        </div>
                        <input type="text" id="mountingSurface" name="mountingSurface" placeholder="Or specify">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="loftFloored">Loft Floored:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="loftFloored" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="loftFloored" data-value="N">No</button>
                            <button type="button" class="btn-choice btn-notes" data-field="loftFloored" data-value="Notes">Notes</button>
                        </div>
                        <input type="hidden" id="loftFloored" name="loftFloored" value="">
                        <div class="notes-field" id="loftFlooredNotes" style="display: none;">
                            <textarea name="loftFlooredNotes" placeholder="Add notes..."></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="loftLight">Loft Light:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="loftLight" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="loftLight" data-value="N">No</button>
                            <button type="button" class="btn-choice btn-notes" data-field="loftLight" data-value="Notes">Notes</button>
                        </div>
                        <input type="hidden" id="loftLight" name="loftLight" value="">
                        <div class="notes-field" id="loftLightNotes" style="display: none;">
                            <textarea name="loftLightNotes" placeholder="Add notes..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="loftLadder">Loft Ladder:</label>
                    <div class="button-group">
                        <button type="button" class="btn-choice" data-field="loftLadder" data-value="Y">Yes</button>
                        <button type="button" class="btn-choice" data-field="loftLadder" data-value="N">No</button>
                        <button type="button" class="btn-choice btn-notes" data-field="loftLadder" data-value="Notes">Notes</button>
                    </div>
                    <input type="hidden" id="loftLadder" name="loftLadder" value="">
                    <div class="notes-field" id="loftLadderNotes" style="display: none;">
                        <textarea name="loftLadderNotes" placeholder="Add notes..."></textarea>
                    </div>
                </div>

                <div class="form-group">
                    <label>Water Heating method:</label>
                    <div class="quick-options" data-target="waterHeating">
                        <button type="button" class="quick-btn">Immersion</button>
                        <button type="button" class="quick-btn">Gas</button>
                        <button type="button" class="quick-btn">Oil</button>
                        <button type="button" class="quick-btn">Heat pump</button>
                    </div>
                    <input type="text" id="waterHeating" name="waterHeating" placeholder="Or specify other">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="smokeAlarms">Interlinked Smoke Alarms:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="smokeAlarms" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="smokeAlarms" data-value="N">No</button>
                            <button type="button" class="btn-choice btn-notes" data-field="smokeAlarms" data-value="Notes">Notes</button>
                        </div>
                        <input type="hidden" id="smokeAlarms" name="smokeAlarms" value="">
                        <div class="notes-field" id="smokeAlarmsNotes" style="display: none;">
                            <textarea name="smokeAlarmsNotes" placeholder="Add notes..."></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="smokeAlarmBrand">Brand:</label>
                        <input type="text" id="smokeAlarmBrand" name="smokeAlarmBrand" placeholder="Brand name">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="smokeAlarmType">Type:</label>
                        <input type="text" id="smokeAlarmType" name="smokeAlarmType" placeholder="Type">
                    </div>
                    <div class="form-group">
                        <label>Hardwired / Wireless:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="smokeAlarmHardwired" data-value="Hardwired">Hardwired</button>
                            <button type="button" class="btn-choice" data-field="smokeAlarmHardwired" data-value="Wireless">Wireless</button>
                        </div>
                        <input type="hidden" id="smokeAlarmHardwired" name="smokeAlarmHardwired" value="">
                    </div>
                </div>
            </section>

            <!-- Section 7: Notes & Photos -->
            <section id="notes" class="form-section">
                <h2>Notes & Photos</h2>

                <div class="form-group">
                    <label for="surveyNotes">Notes:</label>
                    <textarea id="surveyNotes" name="surveyNotes" rows="6" placeholder="Additional notes..."></textarea>
                </div>

                <div class="photo-upload-section">
                    <h3>Upload All Photos</h3>
                    <p class="section-hint">Upload all photos taken during the survey</p>

                    <div class="form-group">
                        <label>Loft Photos:</label>
                        <input type="file" id="loftPhotos" name="loftPhotos" accept="image/*" multiple>
                        <div class="file-preview" id="loftPhotosPreview"></div>
                    </div>

                    <div class="form-group">
                        <label>Meter / Fuse / Earthing Photos:</label>
                        <input type="file" id="electricalPhotos" name="electricalPhotos" accept="image/*" multiple>
                        <div class="file-preview" id="electricalPhotosPreview"></div>
                    </div>

                    <div class="form-group">
                        <label>Consumer Unit Photos:</label>
                        <input type="file" id="consumerUnitPhotos" name="consumerUnitPhotos" accept="image/*" multiple>
                        <div class="file-preview" id="consumerUnitPhotosPreview"></div>
                    </div>

                    <div class="form-group">
                        <label>Roof Photos (inside & outside):</label>
                        <input type="file" id="roofPhotos" name="roofPhotos" accept="image/*" multiple>
                        <div class="file-preview" id="roofPhotosPreview"></div>
                    </div>

                    <div class="form-group">
                        <label>External / Property Photos:</label>
                        <input type="file" id="externalPhotos" name="externalPhotos" accept="image/*" multiple>
                        <div class="file-preview" id="externalPhotosPreview"></div>
                    </div>

                    <div class="form-group">
                        <label>Floorplan:</label>
                        <input type="file" id="floorplan" name="floorplan" accept="image/*,application/pdf">
                        <div class="file-preview" id="floorplanPreview"></div>
                    </div>

                    <div class="form-group">
                        <label>Roof plan:</label>
                        <input type="file" id="roofPlan" name="roofPlan" accept="image/*,application/pdf">
                        <div class="file-preview" id="roofPlanPreview"></div>
                    </div>

                    <div class="form-group">
                        <label>Other Photos:</label>
                        <input type="file" id="otherPhotos" name="otherPhotos" accept="image/*" multiple>
                        <div class="file-preview" id="otherPhotosPreview"></div>
                    </div>
                </div>
            </section>

            <!-- Action Buttons -->
            <div class="form-actions">
                <button type="button" class="action-menu-toggle" id="actionMenuToggle">
                    <span class="burger-icon">
                        <span></span>
                        <span></span>
                        <span></span>
                    </span>
                    Actions
                </button>
                <div class="action-buttons-wrapper" id="actionButtonsWrapper">
                    <button type="button" class="btn-dropbox" id="dropboxBtn">
                        <svg class="dropbox-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2L6 6.5L12 11L6 15.5L12 20L18 15.5L12 11L18 6.5L12 2ZM6 6.5L0 11L6 15.5L12 11L6 6.5ZM18 6.5L12 11L18 15.5L24 11L18 6.5ZM6 15.5L0 20L6 24.5L12 20L6 15.5ZM18 15.5L12 20L18 24.5L24 20L18 15.5Z"/>
                        </svg>
                        Submit to Dropbox
                    </button>
                    <button type="button" class="btn-primary" id="exportBtn">Export to Excel</button>
                    <button type="button" class="btn-secondary" id="exportPdfBtn">Export to PDF</button>
                    <button type="button" class="btn-secondary" id="exportCsvBtn">Export to CSV</button>
                    <button type="button" class="btn-draft" id="saveDraftBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
                        </svg>
                        Save Draft
                    </button>
                    <button type="button" class="btn-draft" id="loadDraftBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"/>
                        </svg>
                        Load Draft
                    </button>
                    <button type="button" class="btn-secondary" id="clearBtn">Clear Form</button>
                </div>
            </div>
        </form>

        <!-- ASHP Post Inspection Form (Hidden by default) -->
        <form id="ashpForm" style="display: none;">
            <!-- ASHP Navigation Menu -->
            <nav class="nav-menu ashp-nav" id="ashpNavMenu">
                <button type="button" class="nav-toggle" id="ashpNavToggle">‚ò∞ Sections</button>
                <div class="nav-items" id="ashpNavItems">
                    <a href="#ashp-title" class="nav-item">Title Page</a>
                    <a href="#ashp-unit" class="nav-item">ASHP Unit</a>
                    <a href="#ashp-cylinder" class="nav-item">Cylinder & Vessels</a>
                    <a href="#ashp-controls" class="nav-item">Controls</a>
                    <a href="#ashp-emitters" class="nav-item">Emitters</a>
                    <a href="#ashp-pipework" class="nav-item">Pipework</a>
                    <a href="#ashp-general" class="nav-item">General & Notes</a>
                    <a href="#ashp-signatures" class="nav-item">Signatures</a>
                </div>
            </nav>

            <!-- Title Page Section -->
            <section id="ashp-title" class="form-section">
                <h2>Title Page</h2>

                <div class="form-group">
                    <label for="ashpCustomer">Customer *</label>
                    <select id="ashpCustomer" name="ashpCustomer" required>
                        <option value="">Select customer type...</option>
                        <option value="Newark & Sherwood">Newark & Sherwood</option>
                        <option value="Eco">Eco</option>
                        <option value="Private">Private</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ashpConductedDate">Conducted On</label>
                        <input type="datetime-local" id="ashpConductedDate" name="ashpConductedDate">
                    </div>
                    <div class="form-group">
                        <label for="ashpPreparedBy">Prepared By</label>
                        <input type="text" id="ashpPreparedBy" name="ashpPreparedBy" placeholder="Inspector name">
                    </div>
                </div>

                <div class="form-group">
                    <label for="ashpLocation">Location</label>
                    <input type="text" id="ashpLocation" name="ashpLocation" placeholder="Property address">
                </div>
            </section>

            <!-- ASHP Unit Section -->
            <section id="ashp-unit" class="form-section">
                <h2>ASHP Unit</h2>

                <div class="form-group">
                    <label for="ashpUnitLocation">Unit Location</label>
                    <select id="ashpUnitLocation" name="ashpUnitLocation">
                        <option value="">Select location...</option>
                        <option value="Rear">Rear</option>
                        <option value="Side">Side</option>
                        <option value="Front">Front</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ashpMake">Make</label>
                        <select id="ashpMake" name="ashpMake">
                            <option value="">Select make...</option>
                            <option value="Vaillant">Vaillant</option>
                            <option value="Samsung">Samsung</option>
                            <option value="Mitsubishi">Mitsubishi</option>
                            <option value="LG">LG</option>
                            <option value="Daikin">Daikin</option>
                            <option value="Viessmann">Viessmann</option>
                            <option value="Panasonic">Panasonic</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="ashpModel">Model</label>
                        <input type="text" id="ashpModel" name="ashpModel" placeholder="Model number">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ashpMounting">Mounting</label>
                        <select id="ashpMounting" name="ashpMounting">
                            <option value="">Select mounting...</option>
                            <option value="Feet">Feet</option>
                            <option value="Wall Bracket">Wall Bracket</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="ashpAntiFreezeType">Anti Freeze Type</label>
                        <select id="ashpAntiFreezeType" name="ashpAntiFreezeType">
                            <option value="">Select type...</option>
                            <option value="Mechanical">Mechanical</option>
                            <option value="Chemical">Chemical</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="ashpCondenseRoute">Condense Route</label>
                    <select id="ashpCondenseRoute" name="ashpCondenseRoute">
                        <option value="">Select route...</option>
                        <option value="Drain">Drain</option>
                        <option value="Soakaway">Soakaway</option>
                        <option value="Pumped">Pumped</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Clearances Compliant</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ashpClearancesCompliant" data-value="Yes">Yes</button>
                            <button type="button" class="btn-choice" data-field="ashpClearancesCompliant" data-value="No">No</button>
                            <button type="button" class="btn-choice" data-field="ashpClearancesCompliant" data-value="N/A">N/A</button>
                        </div>
                        <input type="hidden" id="ashpClearancesCompliant" name="ashpClearancesCompliant" value="">
                    </div>
                    <div class="form-group">
                        <label>Unit Level</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ashpUnitLevel" data-value="Yes">Yes</button>
                            <button type="button" class="btn-choice" data-field="ashpUnitLevel" data-value="No">No</button>
                            <button type="button" class="btn-choice" data-field="ashpUnitLevel" data-value="N/A">N/A</button>
                        </div>
                        <input type="hidden" id="ashpUnitLevel" name="ashpUnitLevel" value="">
                    </div>
                </div>

                <div class="form-group">
                    <label>Unit Undamaged</label>
                    <div class="button-group">
                        <button type="button" class="btn-choice" data-field="ashpUnitUndamaged" data-value="Yes">Yes</button>
                        <button type="button" class="btn-choice" data-field="ashpUnitUndamaged" data-value="No">No</button>
                        <button type="button" class="btn-choice" data-field="ashpUnitUndamaged" data-value="N/A">N/A</button>
                    </div>
                    <input type="hidden" id="ashpUnitUndamaged" name="ashpUnitUndamaged" value="">
                </div>
            </section>

            <!-- Cylinder & Vessels Section -->
            <section id="ashp-cylinder" class="form-section">
                <h2>Cylinder & Vessels</h2>

                <div class="form-group">
                    <label for="ashpCylinderLocation">Location</label>
                    <input type="text" id="ashpCylinderLocation" name="ashpCylinderLocation" placeholder="Cylinder location">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ashpCylinderMake">Make</label>
                        <select id="ashpCylinderMake" name="ashpCylinderMake">
                            <option value="">Select make...</option>
                            <option value="Vaillant">Vaillant</option>
                            <option value="Samsung">Samsung</option>
                            <option value="Mitsubishi">Mitsubishi</option>
                            <option value="LG">LG</option>
                            <option value="Daikin">Daikin</option>
                            <option value="Viessmann">Viessmann</option>
                            <option value="Panasonic">Panasonic</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="ashpCylinderSize">Size (ltr)</label>
                        <input type="number" id="ashpCylinderSize" name="ashpCylinderSize" placeholder="Litres" inputmode="numeric">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Vessels Correct</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ashpVesselsCorrect" data-value="Yes">Yes</button>
                            <button type="button" class="btn-choice" data-field="ashpVesselsCorrect" data-value="No">No</button>
                            <button type="button" class="btn-choice" data-field="ashpVesselsCorrect" data-value="N/A">N/A</button>
                        </div>
                        <input type="hidden" id="ashpVesselsCorrect" name="ashpVesselsCorrect" value="">
                    </div>
                    <div class="form-group">
                        <label>PRV Pipework Complete</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ashpPRVComplete" data-value="Yes">Yes</button>
                            <button type="button" class="btn-choice" data-field="ashpPRVComplete" data-value="No">No</button>
                            <button type="button" class="btn-choice" data-field="ashpPRVComplete" data-value="N/A">N/A</button>
                        </div>
                        <input type="hidden" id="ashpPRVComplete" name="ashpPRVComplete" value="">
                    </div>
                </div>
            </section>

            <!-- Controls Section -->
            <section id="ashp-controls" class="form-section">
                <h2>Controls</h2>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ashpControlsType">Type of Controls</label>
                        <select id="ashpControlsType" name="ashpControlsType">
                            <option value="">Select type...</option>
                            <option value="Smart Wired">Smart Wired</option>
                            <option value="Smart RF">Smart RF</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="ashpSettings">Settings</label>
                        <select id="ashpSettings" name="ashpSettings">
                            <option value="">Select settings...</option>
                            <option value="Auto">Auto</option>
                            <option value="Manual">Manual</option>
                            <option value="Comfort">Comfort</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Customer Received Instructions</label>
                    <div class="button-group">
                        <button type="button" class="btn-choice" data-field="ashpCustomerInstructions" data-value="Yes">Yes</button>
                        <button type="button" class="btn-choice" data-field="ashpCustomerInstructions" data-value="No">No</button>
                        <button type="button" class="btn-choice" data-field="ashpCustomerInstructions" data-value="N/A">N/A</button>
                    </div>
                    <input type="hidden" id="ashpCustomerInstructions" name="ashpCustomerInstructions" value="">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ashpHeatingCurve">Heating Curve</label>
                        <input type="number" id="ashpHeatingCurve" name="ashpHeatingCurve" placeholder="Value" inputmode="decimal" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="ashpFlowrate">Flowrate (lph)</label>
                        <input type="number" id="ashpFlowrate" name="ashpFlowrate" placeholder="Litres per hour" inputmode="numeric">
                    </div>
                </div>
            </section>

            <!-- Emitters Section -->
            <section id="ashp-emitters" class="form-section">
                <h2>Emitters</h2>

                <div class="form-group">
                    <label for="ashpEmitterType">Emitter Type</label>
                    <select id="ashpEmitterType" name="ashpEmitterType">
                        <option value="">Select type...</option>
                        <option value="Radiators">Radiators</option>
                        <option value="Underfloor">Underfloor</option>
                        <option value="Other">Other</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Radiators Level & Unmarked</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ashpRadiatorsLevel" data-value="Yes">Yes</button>
                            <button type="button" class="btn-choice" data-field="ashpRadiatorsLevel" data-value="No">No</button>
                            <button type="button" class="btn-choice" data-field="ashpRadiatorsLevel" data-value="N/A">N/A</button>
                        </div>
                        <input type="hidden" id="ashpRadiatorsLevel" name="ashpRadiatorsLevel" value="">
                    </div>
                    <div class="form-group">
                        <label>Radiators Free from Leaks</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ashpRadiatorsFreeLeaks" data-value="Yes">Yes</button>
                            <button type="button" class="btn-choice" data-field="ashpRadiatorsFreeLeaks" data-value="No">No</button>
                            <button type="button" class="btn-choice" data-field="ashpRadiatorsFreeLeaks" data-value="N/A">N/A</button>
                        </div>
                        <input type="hidden" id="ashpRadiatorsFreeLeaks" name="ashpRadiatorsFreeLeaks" value="">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>By-pass Radiator Correct Location</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ashpBypassCorrect" data-value="Yes">Yes</button>
                            <button type="button" class="btn-choice" data-field="ashpBypassCorrect" data-value="No">No</button>
                            <button type="button" class="btn-choice" data-field="ashpBypassCorrect" data-value="N/A">N/A</button>
                        </div>
                        <input type="hidden" id="ashpBypassCorrect" name="ashpBypassCorrect" value="">
                    </div>
                    <div class="form-group">
                        <label>TRVs Fitted Correctly</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ashpTRVsFitted" data-value="Yes">Yes</button>
                            <button type="button" class="btn-choice" data-field="ashpTRVsFitted" data-value="No">No</button>
                            <button type="button" class="btn-choice" data-field="ashpTRVsFitted" data-value="N/A">N/A</button>
                        </div>
                        <input type="hidden" id="ashpTRVsFitted" name="ashpTRVsFitted" value="">
                    </div>
                </div>
            </section>

            <!-- Pipework Section -->
            <section id="ashp-pipework" class="form-section">
                <h2>Pipework</h2>

                <div class="form-row">
                    <div class="form-group">
                        <label>Pipework Installed Correctly</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ashpPipeworkInstalled" data-value="Yes">Yes</button>
                            <button type="button" class="btn-choice" data-field="ashpPipeworkInstalled" data-value="No">No</button>
                            <button type="button" class="btn-choice" data-field="ashpPipeworkInstalled" data-value="N/A">N/A</button>
                        </div>
                        <input type="hidden" id="ashpPipeworkInstalled" name="ashpPipeworkInstalled" value="">
                    </div>
                    <div class="form-group">
                        <label>Pipework Free from Leaks/Damage</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ashpPipeworkFreeLeaks" data-value="Yes">Yes</button>
                            <button type="button" class="btn-choice" data-field="ashpPipeworkFreeLeaks" data-value="No">No</button>
                            <button type="button" class="btn-choice" data-field="ashpPipeworkFreeLeaks" data-value="N/A">N/A</button>
                        </div>
                        <input type="hidden" id="ashpPipeworkFreeLeaks" name="ashpPipeworkFreeLeaks" value="">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Pipework Correctly Clipped/Supported</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ashpPipeworkClipped" data-value="Yes">Yes</button>
                            <button type="button" class="btn-choice" data-field="ashpPipeworkClipped" data-value="No">No</button>
                            <button type="button" class="btn-choice" data-field="ashpPipeworkClipped" data-value="N/A">N/A</button>
                        </div>
                        <input type="hidden" id="ashpPipeworkClipped" name="ashpPipeworkClipped" value="">
                    </div>
                    <div class="form-group">
                        <label>Pipework Correctly Insulated</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ashpPipeworkInsulated" data-value="Yes">Yes</button>
                            <button type="button" class="btn-choice" data-field="ashpPipeworkInsulated" data-value="No">No</button>
                            <button type="button" class="btn-choice" data-field="ashpPipeworkInsulated" data-value="N/A">N/A</button>
                        </div>
                        <input type="hidden" id="ashpPipeworkInsulated" name="ashpPipeworkInsulated" value="">
                    </div>
                </div>
            </section>

            <!-- General & Notes Section -->
            <section id="ashp-general" class="form-section">
                <h2>General</h2>

                <div class="form-group">
                    <label>Installation Defect Free</label>
                    <div class="button-group">
                        <button type="button" class="btn-choice" data-field="ashpDefectFree" data-value="Yes">Yes</button>
                        <button type="button" class="btn-choice" data-field="ashpDefectFree" data-value="No">No</button>
                        <button type="button" class="btn-choice" data-field="ashpDefectFree" data-value="N/A">N/A</button>
                    </div>
                    <input type="hidden" id="ashpDefectFree" name="ashpDefectFree" value="">
                    <div class="notes-field" id="ashpDefectFreeNotes" style="display: none;">
                        <label for="ashpDefectDetails">Defect Details (required if No):</label>
                        <textarea id="ashpDefectDetails" name="ashpDefectDetails" placeholder="Describe defects found..."></textarea>
                    </div>
                </div>

                <div class="form-group">
                    <label for="ashpNotes">Notes</label>
                    <textarea id="ashpNotes" name="ashpNotes" rows="5" placeholder="Additional notes..."></textarea>
                </div>

                <div class="form-group">
                    <label>Upload Photos</label>
                    <input type="file" id="ashpPhotos" name="ashpPhotos" accept="image/*" multiple>
                    <div class="file-preview" id="ashpPhotosPreview"></div>
                </div>
            </section>

            <!-- Signatures Section -->
            <section id="ashp-signatures" class="form-section">
                <h2>Signatures</h2>

                <div class="form-group">
                    <label>Customer Signature</label>
                    <div class="signature-pad-container">
                        <canvas id="ashpCustomerSignature" class="signature-pad" width="300" height="150"></canvas>
                        <button type="button" class="btn-secondary signature-clear" data-target="ashpCustomerSignature">Clear</button>
                    </div>
                    <input type="hidden" id="ashpCustomerSignatureData" name="ashpCustomerSignatureData" value="">
                    <div class="form-group" style="margin-top: 0.5rem;">
                        <label for="ashpCustomerSignatureDate">Date</label>
                        <input type="date" id="ashpCustomerSignatureDate" name="ashpCustomerSignatureDate">
                    </div>
                </div>

                <div class="form-group">
                    <label>Inspector Signature</label>
                    <div class="signature-pad-container">
                        <canvas id="ashpInspectorSignature" class="signature-pad" width="300" height="150"></canvas>
                        <button type="button" class="btn-secondary signature-clear" data-target="ashpInspectorSignature">Clear</button>
                    </div>
                    <input type="hidden" id="ashpInspectorSignatureData" name="ashpInspectorSignatureData" value="">
                    <div class="form-group" style="margin-top: 0.5rem;">
                        <label for="ashpInspectorSignatureDate">Date</label>
                        <input type="date" id="ashpInspectorSignatureDate" name="ashpInspectorSignatureDate">
                    </div>
                </div>
            </section>

            <!-- ASHP Action Buttons -->
            <div class="form-actions">
                <button type="button" class="action-menu-toggle" id="ashpActionMenuToggle">
                    <span class="burger-icon">
                        <span></span>
                        <span></span>
                        <span></span>
                    </span>
                    Actions
                </button>
                <div class="action-buttons-wrapper" id="ashpActionButtonsWrapper">
                    <button type="button" class="btn-primary" id="ashpExportPdfBtn">Export to PDF</button>
                    <button type="button" class="btn-secondary" id="ashpExportCsvBtn">Export to CSV</button>
                    <button type="button" class="btn-draft" id="ashpSaveDraftBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
                        </svg>
                        Save Draft
                    </button>
                    <button type="button" class="btn-draft" id="ashpLoadDraftBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"/>
                        </svg>
                        Load Draft
                    </button>
                    <button type="button" class="btn-secondary" id="ashpClearBtn">Clear Form</button>
                </div>
            </div>
        </form>

        <!-- Site Survey Form (Full PDF-based survey - Hidden by default) -->
        <form id="siteSurveyForm" style="display: none;">
            <!-- Site Survey Navigation Menu -->
            <nav class="nav-menu site-survey-nav" id="siteSurveyNavMenu">
                <button type="button" class="nav-toggle" id="siteSurveyNavToggle">‚ò∞ Sections</button>
                <div class="nav-items" id="siteSurveyNavItems">
                    <a href="#ss-customer" class="nav-item">Customer Details</a>
                    <a href="#ss-property" class="nav-item">Property Details</a>
                    <a href="#ss-building" class="nav-item">Building</a>
                    <a href="#ss-roof1" class="nav-item">Roof Aspect 1</a>
                    <a href="#ss-roof2" class="nav-item">Roof Aspect 2</a>
                    <a href="#ss-electrical" class="nav-item">Electrical</a>
                    <a href="#ss-notes" class="nav-item">Notes & Plans</a>
                </div>
            </nav>

            <!-- Customer Details Section -->
            <section id="ss-customer" class="form-section">
                <h2>Customer Details</h2>

                <div class="form-group">
                    <label for="ssCarriedOutBy">Carried out by:</label>
                    <select id="ssCarriedOutBy" name="ssCarriedOutBy">
                        <option value="">Select surveyor...</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ssCustomerName">Name:</label>
                        <input type="text" id="ssCustomerName" name="ssCustomerName" placeholder="Customer name">
                    </div>
                    <div class="form-group">
                        <label for="ssAddress">Address:</label>
                        <input type="text" id="ssAddress" name="ssAddress" placeholder="Full address">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ssMobile">Mobile:</label>
                        <input type="tel" id="ssMobile" name="ssMobile" placeholder="Mobile number" inputmode="tel">
                    </div>
                    <div class="form-group">
                        <label for="ssPostCode">Post Code:</label>
                        <input type="text" id="ssPostCode" name="ssPostCode" placeholder="Post code">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ssHome">Home:</label>
                        <input type="tel" id="ssHome" name="ssHome" placeholder="Home phone" inputmode="tel">
                    </div>
                    <div class="form-group">
                        <label for="ssWhat3Words">What 3 Words:</label>
                        <input type="text" id="ssWhat3Words" name="ssWhat3Words" placeholder="///">
                    </div>
                </div>

                <div class="form-group">
                    <label for="ssEmail">Email:</label>
                    <input type="email" id="ssEmail" name="ssEmail" placeholder="email@example.com" inputmode="email">
                </div>
            </section>

            <!-- Property Details Section -->
            <section id="ss-property" class="form-section">
                <h2>Property Details</h2>

                <div class="form-row">
                    <div class="form-group">
                        <label>Conservation Area:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssConservationArea" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="ssConservationArea" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="ssConservationArea" name="ssConservationArea" value="">
                    </div>
                    <div class="form-group">
                        <label>Terrain:</label>
                        <div class="quick-options" data-target="ssTerrain">
                            <button type="button" class="quick-btn">Town</button>
                            <button type="button" class="quick-btn">Country</button>
                            <button type="button" class="quick-btn">Coastal</button>
                        </div>
                        <input type="text" id="ssTerrain" name="ssTerrain" placeholder="Or specify">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Property Exposed:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssPropertyExposed" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="ssPropertyExposed" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="ssPropertyExposed" name="ssPropertyExposed" value="">
                    </div>
                    <div class="form-group">
                        <label>Parking Available:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssParkingAvailable" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="ssParkingAvailable" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="ssParkingAvailable" name="ssParkingAvailable" value="">
                    </div>
                </div>

                <div class="form-group" id="ssParkingSpecGroup" style="display: none;">
                    <label for="ssParkingSpec">If no, please specify:</label>
                    <input type="text" id="ssParkingSpec" name="ssParkingSpec" placeholder="Parking details">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ssOccupancyType">Occupancy Type:</label>
                        <input type="text" id="ssOccupancyType" name="ssOccupancyType" placeholder="e.g. Owner occupied">
                    </div>
                    <div class="form-group">
                        <label for="ssKwhPerAnnum">kWh per annum:</label>
                        <input type="number" id="ssKwhPerAnnum" name="ssKwhPerAnnum" placeholder="kWh" inputmode="numeric">
                    </div>
                </div>

                <div class="form-group">
                    <label>DNO:</label>
                    <div class="quick-options" data-target="ssDno">
                        <button type="button" class="quick-btn">SSE</button>
                        <button type="button" class="quick-btn">SP Network</button>
                    </div>
                    <input type="text" id="ssDno" name="ssDno" placeholder="Or specify other">
                </div>
            </section>

            <!-- Building Section -->
            <section id="ss-building" class="form-section">
                <h2>Building</h2>

                <div class="form-group">
                    <label>Construction:</label>
                    <div class="quick-options" data-target="ssConstruction">
                        <button type="button" class="quick-btn">Trad stone</button>
                        <button type="button" class="quick-btn">Brick</button>
                        <button type="button" class="quick-btn">Block</button>
                        <button type="button" class="quick-btn">Timber frame</button>
                    </div>
                    <input type="text" id="ssConstruction" name="ssConstruction" placeholder="Or specify other">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ssWallThickness">Thickness of wall:</label>
                        <input type="text" id="ssWallThickness" name="ssWallThickness" placeholder="e.g. 300mm">
                    </div>
                    <div class="form-group">
                        <label for="ssInternalWalkConstruction">Internal walk construction:</label>
                        <input type="text" id="ssInternalWalkConstruction" name="ssInternalWalkConstruction" placeholder="Construction type">
                    </div>
                </div>

                <div class="form-group">
                    <label>Type of Building:</label>
                    <div class="quick-options" data-target="ssBuildingType">
                        <button type="button" class="quick-btn">Bungalow</button>
                        <button type="button" class="quick-btn">2 storey</button>
                        <button type="button" class="quick-btn">3 storey</button>
                        <button type="button" class="quick-btn">Townhouse</button>
                    </div>
                    <input type="text" id="ssBuildingType" name="ssBuildingType" placeholder="Or specify other">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Protected Species:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssProtectedSpecies" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="ssProtectedSpecies" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="ssProtectedSpecies" name="ssProtectedSpecies" value="">
                    </div>
                    <div class="form-group">
                        <label>Nests:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssNests" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="ssNests" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="ssNests" name="ssNests" value="">
                    </div>
                </div>

                <div class="form-group" id="ssNestSpecGroup" style="display: none;">
                    <label for="ssNestSpec">Type of nest/species:</label>
                    <input type="text" id="ssNestSpec" name="ssNestSpec" placeholder="Nest/species details">
                </div>
            </section>

            <!-- Roof Aspect 1 Section -->
            <section id="ss-roof1" class="form-section">
                <h2>Roof Aspect 1</h2>
                <p class="section-hint">Roof drawing(s) to be completed</p>

                <div class="form-row">
                    <div class="form-group">
                        <label>Covering Type:</label>
                        <div class="quick-options" data-target="ssRoof1CoveringType">
                            <button type="button" class="quick-btn">Slate</button>
                            <button type="button" class="quick-btn">Tile</button>
                            <button type="button" class="quick-btn">Concrete</button>
                            <button type="button" class="quick-btn">Metal</button>
                        </div>
                        <input type="text" id="ssRoof1CoveringType" name="ssRoof1CoveringType" placeholder="Or specify">
                    </div>
                    <div class="form-group">
                        <label for="ssRoof1SlopeLength">Slope length:</label>
                        <input type="text" id="ssRoof1SlopeLength" name="ssRoof1SlopeLength" placeholder="e.g. 5m">
                    </div>
                    <div class="form-group">
                        <label for="ssRoof1OrientationFromS">Orientation from S:</label>
                        <input type="text" id="ssRoof1OrientationFromS" name="ssRoof1OrientationFromS" placeholder="e.g. 15¬∞ E">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ssRoof1WidthAtGutter">Width at Gutter:</label>
                        <input type="text" id="ssRoof1WidthAtGutter" name="ssRoof1WidthAtGutter" placeholder="e.g. 8m">
                    </div>
                    <div class="form-group">
                        <label for="ssRoof1WidthAtRidge">Width at Ridge:</label>
                        <input type="text" id="ssRoof1WidthAtRidge" name="ssRoof1WidthAtRidge" placeholder="e.g. 8m">
                    </div>
                    <div class="form-group">
                        <label for="ssRoof1Inclination">Inclination:</label>
                        <input type="text" id="ssRoof1Inclination" name="ssRoof1Inclination" placeholder="e.g. 35¬∞">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ssRoof1RafterWidth">Rafter Width:</label>
                        <input type="text" id="ssRoof1RafterWidth" name="ssRoof1RafterWidth" placeholder="e.g. 50mm">
                    </div>
                    <div class="form-group">
                        <label for="ssRoof1RafterDepth">Rafter Depth:</label>
                        <input type="text" id="ssRoof1RafterDepth" name="ssRoof1RafterDepth" placeholder="e.g. 100mm">
                    </div>
                    <div class="form-group">
                        <label for="ssRoof1CentreSpacings">Centre spacings:</label>
                        <input type="text" id="ssRoof1CentreSpacings" name="ssRoof1CentreSpacings" placeholder="e.g. 400mm">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ssRoof1GutterHeight">Gutter height:</label>
                        <input type="text" id="ssRoof1GutterHeight" name="ssRoof1GutterHeight" placeholder="e.g. 4m">
                    </div>
                    <div class="form-group">
                        <label>Is roof under warranty:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssRoof1UnderWarranty" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="ssRoof1UnderWarranty" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="ssRoof1UnderWarranty" name="ssRoof1UnderWarranty" value="">
                    </div>
                    <div class="form-group">
                        <label>Shading Present:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssRoof1ShadingPresent" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="ssRoof1ShadingPresent" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="ssRoof1ShadingPresent" name="ssRoof1ShadingPresent" value="">
                    </div>
                </div>
            </section>

            <!-- Roof Aspect 2 Section -->
            <section id="ss-roof2" class="form-section">
                <h2>Roof Aspect 2</h2>
                <p class="section-hint">For additional aspects note on reverse</p>

                <div class="form-row">
                    <div class="form-group">
                        <label>Covering Type:</label>
                        <div class="quick-options" data-target="ssRoof2CoveringType">
                            <button type="button" class="quick-btn">Slate</button>
                            <button type="button" class="quick-btn">Tile</button>
                            <button type="button" class="quick-btn">Concrete</button>
                            <button type="button" class="quick-btn">Metal</button>
                        </div>
                        <input type="text" id="ssRoof2CoveringType" name="ssRoof2CoveringType" placeholder="Or specify">
                    </div>
                    <div class="form-group">
                        <label for="ssRoof2SlopeLength">Slope length:</label>
                        <input type="text" id="ssRoof2SlopeLength" name="ssRoof2SlopeLength" placeholder="e.g. 5m">
                    </div>
                    <div class="form-group">
                        <label for="ssRoof2OrientationFromS">Orientation from S:</label>
                        <input type="text" id="ssRoof2OrientationFromS" name="ssRoof2OrientationFromS" placeholder="e.g. 15¬∞ E">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ssRoof2WidthAtGutter">Width at Gutter:</label>
                        <input type="text" id="ssRoof2WidthAtGutter" name="ssRoof2WidthAtGutter" placeholder="e.g. 8m">
                    </div>
                    <div class="form-group">
                        <label for="ssRoof2WidthAtRidge">Width at Ridge:</label>
                        <input type="text" id="ssRoof2WidthAtRidge" name="ssRoof2WidthAtRidge" placeholder="e.g. 8m">
                    </div>
                    <div class="form-group">
                        <label for="ssRoof2Inclination">Inclination:</label>
                        <input type="text" id="ssRoof2Inclination" name="ssRoof2Inclination" placeholder="e.g. 35¬∞">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ssRoof2RafterWidth">Rafter Width:</label>
                        <input type="text" id="ssRoof2RafterWidth" name="ssRoof2RafterWidth" placeholder="e.g. 50mm">
                    </div>
                    <div class="form-group">
                        <label for="ssRoof2RafterDepth">Rafter Depth:</label>
                        <input type="text" id="ssRoof2RafterDepth" name="ssRoof2RafterDepth" placeholder="e.g. 100mm">
                    </div>
                    <div class="form-group">
                        <label for="ssRoof2CentreSpacings">Centre spacings:</label>
                        <input type="text" id="ssRoof2CentreSpacings" name="ssRoof2CentreSpacings" placeholder="e.g. 400mm">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ssRoof2GutterHeight">Gutter height:</label>
                        <input type="text" id="ssRoof2GutterHeight" name="ssRoof2GutterHeight" placeholder="e.g. 4m">
                    </div>
                    <div class="form-group">
                        <label>Is roof under warranty:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssRoof2UnderWarranty" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="ssRoof2UnderWarranty" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="ssRoof2UnderWarranty" name="ssRoof2UnderWarranty" value="">
                    </div>
                    <div class="form-group">
                        <label>Shading Present:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssRoof2ShadingPresent" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="ssRoof2ShadingPresent" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="ssRoof2ShadingPresent" name="ssRoof2ShadingPresent" value="">
                    </div>
                </div>
            </section>

            <!-- Electrical Section -->
            <section id="ss-electrical" class="form-section">
                <h2>Electrical</h2>
                <p class="section-hint">Floor plan(s) to be completed</p>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ssFuseboardLocation">Fuseboard Location:</label>
                        <input type="text" id="ssFuseboardLocation" name="ssFuseboardLocation" placeholder="Location">
                    </div>
                    <div class="form-group">
                        <label for="ssMeterLocation">Meter Location:</label>
                        <input type="text" id="ssMeterLocation" name="ssMeterLocation" placeholder="Location">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ssElectricalCondition">Condition of Electrical installation:</label>
                        <input type="text" id="ssElectricalCondition" name="ssElectricalCondition" placeholder="Condition">
                    </div>
                    <div class="form-group">
                        <label for="ssNumberOfPhases">Number of Phases:</label>
                        <input type="number" id="ssNumberOfPhases" name="ssNumberOfPhases" placeholder="1 or 3" inputmode="numeric">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ssMainFuseSize">Main Fuse Size:</label>
                        <input type="text" id="ssMainFuseSize" name="ssMainFuseSize" placeholder="e.g. 100A">
                    </div>
                    <div class="form-group">
                        <label>Earthing System:</label>
                        <div class="quick-options" data-target="ssEarthingSystem">
                            <button type="button" class="quick-btn">TN-S</button>
                            <button type="button" class="quick-btn">TN-C-S</button>
                            <button type="button" class="quick-btn">TT</button>
                        </div>
                        <input type="text" id="ssEarthingSystem" name="ssEarthingSystem" placeholder="Or specify">
                    </div>
                    <div class="form-group">
                        <label for="ssMaximumDemand">Maximum Demand:</label>
                        <input type="text" id="ssMaximumDemand" name="ssMaximumDemand" placeholder="Maximum demand">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Looped Supply:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssLoopedSupply" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="ssLoopedSupply" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="ssLoopedSupply" name="ssLoopedSupply" value="">
                    </div>
                    <div class="form-group">
                        <label for="ssLoopImpedance">L-N Loop impedance:</label>
                        <input type="text" id="ssLoopImpedance" name="ssLoopImpedance" placeholder="Impedance">
                    </div>
                </div>

                <div class="form-note important">
                    <strong>MUST BE PHOTOGRAPHED</strong>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Space for new CU:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssSpaceForNewCU" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="ssSpaceForNewCU" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="ssSpaceForNewCU" name="ssSpaceForNewCU" value="">
                    </div>
                    <div class="form-group">
                        <label>Underfloor Access:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssUnderfloorAccess" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="ssUnderfloorAccess" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="ssUnderfloorAccess" name="ssUnderfloorAccess" value="">
                    </div>
                    <div class="form-group">
                        <label>Cable route:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssCableRoute" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="ssCableRoute" data-value="N">No</button>
                            <button type="button" class="btn-choice" data-field="ssCableRoute" data-value="See Plan">See Plan</button>
                        </div>
                        <input type="hidden" id="ssCableRoute" name="ssCableRoute" value="">
                    </div>
                </div>

                <div class="form-group">
                    <label>Floor Coverings:</label>
                    <div class="quick-options" data-target="ssFloorCoverings">
                        <button type="button" class="quick-btn">Laminate</button>
                        <button type="button" class="quick-btn">Carpet</button>
                        <button type="button" class="quick-btn">Tile</button>
                        <button type="button" class="quick-btn">Wood</button>
                    </div>
                    <input type="text" id="ssFloorCoverings" name="ssFloorCoverings" placeholder="Or specify other">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ssInverterLocation">Inverter Location:</label>
                        <input type="text" id="ssInverterLocation" name="ssInverterLocation" placeholder="Location">
                    </div>
                    <div class="form-group">
                        <label>Interior/Exterior:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssInverterInteriorExterior" data-value="Interior">Interior</button>
                            <button type="button" class="btn-choice" data-field="ssInverterInteriorExterior" data-value="Exterior">Exterior</button>
                        </div>
                        <input type="hidden" id="ssInverterInteriorExterior" name="ssInverterInteriorExterior" value="">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>WiFi Available:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssWifiAvailable" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="ssWifiAvailable" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="ssWifiAvailable" name="ssWifiAvailable" value="">
                    </div>
                    <div class="form-group">
                        <label for="ssMountingSurface">Mounting Surface:</label>
                        <input type="text" id="ssMountingSurface" name="ssMountingSurface" placeholder="Surface type">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Loft Floored:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssLoftFloored" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="ssLoftFloored" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="ssLoftFloored" name="ssLoftFloored" value="">
                    </div>
                    <div class="form-group">
                        <label>Loft Light:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssLoftLight" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="ssLoftLight" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="ssLoftLight" name="ssLoftLight" value="">
                    </div>
                    <div class="form-group">
                        <label>Loft Ladder:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssLoftLadder" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="ssLoftLadder" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="ssLoftLadder" name="ssLoftLadder" value="">
                    </div>
                </div>

                <div class="form-group">
                    <label>Water Heating method:</label>
                    <div class="quick-options" data-target="ssWaterHeating">
                        <button type="button" class="quick-btn">Immersion</button>
                        <button type="button" class="quick-btn">Gas</button>
                        <button type="button" class="quick-btn">Oil</button>
                        <button type="button" class="quick-btn">Heat pump</button>
                    </div>
                    <input type="text" id="ssWaterHeating" name="ssWaterHeating" placeholder="Or specify other">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Interlinked Smoke Alarms:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssSmokeAlarms" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="ssSmokeAlarms" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="ssSmokeAlarms" name="ssSmokeAlarms" value="">
                    </div>
                    <div class="form-group">
                        <label for="ssSmokeAlarmBrand">Brand:</label>
                        <input type="text" id="ssSmokeAlarmBrand" name="ssSmokeAlarmBrand" placeholder="Brand name">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ssSmokeAlarmType">Type:</label>
                        <input type="text" id="ssSmokeAlarmType" name="ssSmokeAlarmType" placeholder="Type">
                    </div>
                    <div class="form-group">
                        <label>Hardwired / Wireless:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="ssSmokeAlarmWired" data-value="Hardwired">Hardwired</button>
                            <button type="button" class="btn-choice" data-field="ssSmokeAlarmWired" data-value="Wireless">Wireless</button>
                        </div>
                        <input type="hidden" id="ssSmokeAlarmWired" name="ssSmokeAlarmWired" value="">
                    </div>
                </div>
            </section>

            <!-- Notes & Plans Section -->
            <section id="ss-notes" class="form-section">
                <h2>Notes & Plans</h2>

                <div class="form-note">
                    <strong>Note:</strong> For metal box profile or corrugated roofs please note the distance between peaks, height of peaks and width of peaks.
                </div>

                <div class="form-group">
                    <label for="ssSurveyNotes">Notes:</label>
                    <textarea id="ssSurveyNotes" name="ssSurveyNotes" rows="6" placeholder="Additional notes..."></textarea>
                </div>

                <div class="form-group">
                    <label>Floorplan:</label>
                    <input type="file" id="ssFloorplan" name="ssFloorplan" accept="image/*,application/pdf">
                    <div class="file-preview" id="ssFloorplanPreview"></div>
                </div>

                <div class="form-group">
                    <label>Roof plan:</label>
                    <input type="file" id="ssRoofPlan" name="ssRoofPlan" accept="image/*,application/pdf">
                    <div class="file-preview" id="ssRoofPlanPreview"></div>
                </div>

                <div class="form-group">
                    <label>Site Photos:</label>
                    <input type="file" id="ssSitePhotos" name="ssSitePhotos" accept="image/*" multiple>
                    <div class="file-preview" id="ssSitePhotosPreview"></div>
                </div>
            </section>

            <!-- Site Survey Action Buttons -->
            <div class="form-actions">
                <button type="button" class="action-menu-toggle" id="ssActionMenuToggle">
                    <span class="burger-icon">
                        <span></span>
                        <span></span>
                        <span></span>
                    </span>
                    Actions
                </button>
                <div class="action-buttons-wrapper" id="ssActionButtonsWrapper">
                    <button type="button" class="btn-primary" id="ssExportPdfBtn">Export to PDF</button>
                    <button type="button" class="btn-secondary" id="ssExportCsvBtn">Export to CSV</button>
                    <button type="button" class="btn-draft" id="ssSaveDraftBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
                        </svg>
                        Save Draft
                    </button>
                    <button type="button" class="btn-draft" id="ssLoadDraftBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"/>
                        </svg>
                        Load Draft
                    </button>
                    <button type="button" class="btn-secondary" id="ssClearBtn">Clear Form</button>
                </div>
            </div>
        </form>
    </div>

    <!-- Job Completed Form (Hidden by default) -->
    <div class="container" id="jobCompletedContainer" style="display: none;">
        <header class="header">
            <div class="header-brand">
                <h1>Job Completed Sheet</h1>
                <div class="header-trust-badges">
                    <img src="public/Untitled design (17).png" alt="Viking Tools" class="header-logo-main">
                    <img src="public/Untitled design (19).png" alt="Octopus Trusted Partner" class="header-logo-main">
                    <img src="public/Untitled design (21).png" alt="MCS Certified" class="header-logo-badge">
                </div>
            </div>
        </header>

        <form id="jobCompletedForm">
            <!-- Job Completed Navigation Menu -->
            <nav class="nav-menu jc-nav" id="jcNavMenu">
                <button type="button" class="nav-toggle" id="jcNavToggle">‚ò∞ Sections</button>
                <div class="nav-items" id="jcNavItems">
                    <a href="#jc-customer" class="nav-item">Customer Details</a>
                    <a href="#jc-installation" class="nav-item">Installation</a>
                    <a href="#jc-strings" class="nav-item">Strings</a>
                    <a href="#jc-commission" class="nav-item">Commission</a>
                    <a href="#jc-feedback" class="nav-item">Feedback</a>
                    <a href="#jc-signatures" class="nav-item">Signatures</a>
                </div>
            </nav>

            <!-- Customer Details Section -->
            <section id="jc-customer" class="form-section">
                <h2>Customer Details</h2>

                <div class="form-row">
                    <div class="form-group">
                        <label for="jcCustomerName">Customer Name:</label>
                        <input type="text" id="jcCustomerName" name="jcCustomerName" placeholder="Customer name">
                    </div>
                    <div class="form-group">
                        <label for="jcJobRef">Job Ref:</label>
                        <input type="text" id="jcJobRef" name="jcJobRef" placeholder="Job reference">
                    </div>
                </div>

                <div class="form-group">
                    <label for="jcAddress">Address:</label>
                    <input type="text" id="jcAddress" name="jcAddress" placeholder="Full address">
                </div>

                <div class="form-group">
                    <label for="jcPostCode">Post Code:</label>
                    <input type="text" id="jcPostCode" name="jcPostCode" placeholder="Post code">
                </div>
            </section>

            <!-- Installation Details Section -->
            <section id="jc-installation" class="form-section">
                <h2>Installation Details</h2>

                <div class="form-group">
                    <label for="jcInverterBatteryLocation">Inverter & Battery Location:</label>
                    <div class="quick-options" data-target="jcInverterBatteryLocation">
                        <button type="button" class="quick-btn">Garage</button>
                        <button type="button" class="quick-btn">Loft</button>
                        <button type="button" class="quick-btn">Utility</button>
                        <button type="button" class="quick-btn">Hall</button>
                    </div>
                    <input type="text" id="jcInverterBatteryLocation" name="jcInverterBatteryLocation" placeholder="Or specify location">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="jcInverter">Inverter:</label>
                        <div class="quick-options" data-target="jcInverter">
                            <button type="button" class="quick-btn">GivEnergy</button>
                            <button type="button" class="quick-btn">FoxESS</button>
                            <button type="button" class="quick-btn">Solis</button>
                        </div>
                        <input type="text" id="jcInverter" name="jcInverter" placeholder="Model/spec">
                    </div>
                    <div class="form-group">
                        <label for="jcBattery">Battery:</label>
                        <div class="quick-options" data-target="jcBattery">
                            <button type="button" class="quick-btn">GivEnergy</button>
                            <button type="button" class="quick-btn">FoxESS</button>
                            <button type="button" class="quick-btn">Ecoflow</button>
                        </div>
                        <input type="text" id="jcBattery" name="jcBattery" placeholder="Model/spec">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="jcPanels">Panels:</label>
                        <input type="text" id="jcPanels" name="jcPanels" placeholder="Panel type/model">
                    </div>
                    <div class="form-group">
                        <label for="jcTigoQuantity">Tigo Quantity:</label>
                        <input type="number" id="jcTigoQuantity" name="jcTigoQuantity" placeholder="Number of Tigos" inputmode="numeric">
                    </div>
                </div>

                <div class="form-group">
                    <label>WiFi Extender:</label>
                    <div class="button-group">
                        <button type="button" class="btn-choice" data-field="jcWifiExtender" data-value="Y">Yes</button>
                        <button type="button" class="btn-choice" data-field="jcWifiExtender" data-value="N">No</button>
                    </div>
                    <input type="hidden" id="jcWifiExtender" name="jcWifiExtender" value="">
                </div>
            </section>

            <!-- Strings Section -->
            <section id="jc-strings" class="form-section">
                <h2>String Configuration</h2>

                <div class="inhome-group">
                    <h3>String 1</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="jcString1Panels">Panels:</label>
                            <input type="number" id="jcString1Panels" name="jcString1Panels" placeholder="Number" inputmode="numeric">
                        </div>
                        <div class="form-group">
                            <label for="jcString1Orientation">Orientation:</label>
                            <div class="quick-options" data-target="jcString1Orientation">
                                <button type="button" class="quick-btn">N</button>
                                <button type="button" class="quick-btn">S</button>
                                <button type="button" class="quick-btn">E</button>
                                <button type="button" class="quick-btn">W</button>
                                <button type="button" class="quick-btn">SE</button>
                                <button type="button" class="quick-btn">SW</button>
                            </div>
                            <input type="text" id="jcString1Orientation" name="jcString1Orientation" placeholder="Or specify">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="jcString1Inclination">Inclination:</label>
                        <div class="quick-options" data-target="jcString1Inclination">
                            <button type="button" class="quick-btn">15¬∞</button>
                            <button type="button" class="quick-btn">30¬∞</button>
                            <button type="button" class="quick-btn">35¬∞</button>
                            <button type="button" class="quick-btn">40¬∞</button>
                            <button type="button" class="quick-btn">45¬∞</button>
                        </div>
                        <input type="text" id="jcString1Inclination" name="jcString1Inclination" placeholder="Or specify">
                    </div>
                </div>

                <div class="inhome-group">
                    <h3>String 2</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="jcString2Panels">Panels:</label>
                            <input type="number" id="jcString2Panels" name="jcString2Panels" placeholder="Number" inputmode="numeric">
                        </div>
                        <div class="form-group">
                            <label for="jcString2Orientation">Orientation:</label>
                            <div class="quick-options" data-target="jcString2Orientation">
                                <button type="button" class="quick-btn">N</button>
                                <button type="button" class="quick-btn">S</button>
                                <button type="button" class="quick-btn">E</button>
                                <button type="button" class="quick-btn">W</button>
                                <button type="button" class="quick-btn">SE</button>
                                <button type="button" class="quick-btn">SW</button>
                            </div>
                            <input type="text" id="jcString2Orientation" name="jcString2Orientation" placeholder="Or specify">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="jcString2Inclination">Inclination:</label>
                        <div class="quick-options" data-target="jcString2Inclination">
                            <button type="button" class="quick-btn">15¬∞</button>
                            <button type="button" class="quick-btn">30¬∞</button>
                            <button type="button" class="quick-btn">35¬∞</button>
                            <button type="button" class="quick-btn">40¬∞</button>
                            <button type="button" class="quick-btn">45¬∞</button>
                        </div>
                        <input type="text" id="jcString2Inclination" name="jcString2Inclination" placeholder="Or specify">
                    </div>
                </div>

                <div class="inhome-group">
                    <h3>Smoke Alarms</h3>
                    <div class="form-group">
                        <label>Smoke Alarm(s) Fitted:</label>
                        <div class="button-group">
                            <button type="button" class="btn-choice" data-field="jcSmokeAlarmsFitted" data-value="Y">Yes</button>
                            <button type="button" class="btn-choice" data-field="jcSmokeAlarmsFitted" data-value="N">No</button>
                        </div>
                        <input type="hidden" id="jcSmokeAlarmsFitted" name="jcSmokeAlarmsFitted" value="">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="jcSmokeAlarmType">Type:</label>
                            <input type="text" id="jcSmokeAlarmType" name="jcSmokeAlarmType" placeholder="Alarm type">
                        </div>
                        <div class="form-group">
                            <label for="jcSmokeAlarmNumber">Number:</label>
                            <input type="number" id="jcSmokeAlarmNumber" name="jcSmokeAlarmNumber" placeholder="Quantity" inputmode="numeric">
                        </div>
                    </div>
                </div>
            </section>

            <!-- Commission Section -->
            <section id="jc-commission" class="form-section">
                <h2>Commission</h2>

                <div class="form-group">
                    <label>Site Commissioned:</label>
                    <div class="button-group">
                        <button type="button" class="btn-choice" data-field="jcSiteCommissioned" data-value="Y">Yes</button>
                        <button type="button" class="btn-choice" data-field="jcSiteCommissioned" data-value="N">No</button>
                    </div>
                    <input type="hidden" id="jcSiteCommissioned" name="jcSiteCommissioned" value="">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="jcUsername">Username:</label>
                        <input type="text" id="jcUsername" name="jcUsername" placeholder="System username">
                    </div>
                    <div class="form-group">
                        <label for="jcPassword">Password:</label>
                        <input type="text" id="jcPassword" name="jcPassword" placeholder="System password">
                    </div>
                </div>

                <div class="form-group">
                    <label>Accounts Set Up For Customer:</label>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="jcAccountGivEnergy" value="GivEnergy">
                            <span>GivEnergy</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="jcAccountFoxESS" value="FoxESS">
                            <span>FoxESS</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="jcAccountEcoflow" value="Ecoflow">
                            <span>Ecoflow</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="jcAccountTigo" value="Tigo">
                            <span>Tigo</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="jcAccountOther" value="Other">
                            <span>Other</span>
                        </label>
                    </div>
                    <input type="text" id="jcAccountOtherSpec" name="jcAccountOtherSpec" placeholder="If other, please specify" style="margin-top: 0.5rem;">
                </div>

                <div class="form-group">
                    <label for="jcInstallers">Installers:</label>
                    <input type="text" id="jcInstallers" name="jcInstallers" placeholder="Installer names">
                </div>
            </section>

            <!-- Feedback Section -->
            <section id="jc-feedback" class="form-section">
                <h2>Customer Feedback</h2>

                <div class="form-group">
                    <label for="jcCustomerFeedback">Customer Feedback:</label>
                    <textarea id="jcCustomerFeedback" name="jcCustomerFeedback" rows="5" placeholder="Customer comments and feedback..."></textarea>
                </div>
            </section>

            <!-- Signatures Section -->
            <section id="jc-signatures" class="form-section">
                <h2>Signatures</h2>

                <div class="form-group">
                    <label>Customer Signature</label>
                    <div class="signature-pad-container">
                        <canvas id="jcCustomerSignature" class="signature-pad" width="300" height="150"></canvas>
                        <button type="button" class="btn-secondary signature-clear" data-target="jcCustomerSignature">Clear</button>
                    </div>
                    <input type="hidden" id="jcCustomerSignatureData" name="jcCustomerSignatureData" value="">
                    <div class="form-group" style="margin-top: 0.5rem;">
                        <label for="jcCustomerSignatureDate">Date:</label>
                        <input type="date" id="jcCustomerSignatureDate" name="jcCustomerSignatureDate">
                    </div>
                </div>

                <div class="form-group">
                    <label>Installer Signature</label>
                    <div class="signature-pad-container">
                        <canvas id="jcInstallerSignature" class="signature-pad" width="300" height="150"></canvas>
                        <button type="button" class="btn-secondary signature-clear" data-target="jcInstallerSignature">Clear</button>
                    </div>
                    <input type="hidden" id="jcInstallerSignatureData" name="jcInstallerSignatureData" value="">
                    <div class="form-group" style="margin-top: 0.5rem;">
                        <label for="jcInstallerSignatureDate">Date:</label>
                        <input type="date" id="jcInstallerSignatureDate" name="jcInstallerSignatureDate">
                    </div>
                </div>
            </section>

            <!-- Job Completed Action Buttons -->
            <div class="form-actions">
                <button type="button" class="action-menu-toggle" id="jcActionMenuToggle">
                    <span class="burger-icon">
                        <span></span>
                        <span></span>
                        <span></span>
                    </span>
                    Actions
                </button>
                <div class="action-buttons-wrapper" id="jcActionButtonsWrapper">
                    <button type="button" class="btn-primary" id="jcExportPdfBtn">Export to PDF</button>
                    <button type="button" class="btn-secondary" id="jcExportCsvBtn">Export to CSV</button>
                    <button type="button" class="btn-draft" id="jcSaveDraftBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
                        </svg>
                        Save Draft
                    </button>
                    <button type="button" class="btn-draft" id="jcLoadDraftBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"/>
                        </svg>
                        Load Draft
                    </button>
                    <button type="button" class="btn-secondary" id="jcClearBtn">Clear Form</button>
                </div>
            </div>
        </form>
    </div>

    <!-- Custom Forms Section (Hidden by default) -->
    <div class="container" id="customFormsContainer" style="display: none;">
        <div class="form-section">
            <h2>Custom Form Builder</h2>
            <p class="section-hint">Create custom forms with text, numbers, dropdowns, photos, and signatures.</p>

            <div class="custom-forms-actions" style="display: flex; gap: 0.75rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                <button type="button" class="btn-primary" id="createFormBtn">+ Create New Form</button>
                <button type="button" class="btn-secondary" id="openFormBtn">Open Saved Form</button>
            </div>

            <!-- Form Builder Container -->
            <div id="formBuilderContainer"></div>

            <!-- Form Renderer Container -->
            <div id="formRendererContainer"></div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script type="module" src="js/app.js"></script>
    <script type="module" src="js/components/FrimbleChat.js"></script>

    <!-- Frimble Chat Component -->
    <button class="chat-toggle-btn" id="chatToggleBtn" title="Chat with Frimble">
        <span class="chat-toggle-icon">ü¶ä</span>
    </button>

    <div class="chat-panel" id="chatPanel">
        <div class="chat-header">
            <span class="chat-avatar">ü¶ä</span>
            <div class="chat-header-info">
                <h3 class="chat-header-name">Frimble</h3>
                <div class="chat-header-status">
                    <span class="chat-status-dot" id="chatStatusDot"></span>
                    <span id="chatStatusText">Connecting...</span>
                </div>
            </div>
            <button class="chat-close-btn" id="chatCloseBtn">&times;</button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="chat-message system">Connecting to Frimble...</div>
        </div>
        <div class="chat-input-container">
            <input type="text" class="chat-input" id="chatInput" placeholder="Type a message..." disabled>
            <button class="chat-send-btn" id="chatSendBtn" disabled>
                <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
            </button>
        </div>
    </div>
    <script>
        // Register Service Worker for offline support
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
</body>
</html>

